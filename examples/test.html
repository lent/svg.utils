<html>
	<head>
		<title>SVG Test</title>
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
		<style type="text/css">
			html { height: 100% }
			body { height: 100%; margin: 0; padding: 0 }
		</style>
		<script data-main="main" src="svg.min.js"></script>
		<script data-main="main" src="svg.draggable.js"></script>
		<script data-main="main" src="../svg.ext.js"></script>
		<script data-main="main" src="../svg.utils.js"></script>
	</head>
	<body>
		<div id="svg"></div>
		<script>
	if(!SVG.supported) {
		console.error("svg not supported by your browser!");
	}
	var path1 = "m 0,0.5 0,28.65625 5.78125,0 L 5.78125,0.5 0,0.5 z m 167,0 0,5.09375 5.5,0 0,-5.09375 -5.5,0 z m -125.5625,0.59375 -5.5,3.1875 0,4.125 -2.53125,0 0,4.375 2.53125,0 0,9.03125 c -1e-5,1.94011 0.07031,3.23698 0.1875,3.875 0.14322,0.89844 0.3789,1.59766 0.75,2.125 0.37109,0.52735 0.95572,0.98047 1.75,1.3125 0.79426,0.33203 1.69791,0.5 2.6875,0.5 1.61457,0 3.06769,-0.29687 4.34375,-0.84375 l -0.46875,-4.25 c -0.96356,0.35156 -1.71095,0.53126 -2.21875,0.53125 -0.3646,10e-6 -0.6836,-0.09895 -0.9375,-0.28125 -0.25391,-0.18228 -0.39715,-0.40754 -0.46875,-0.6875 -0.07162,-0.27994 -0.12501,-1.27604 -0.125,-2.96875 l 0,-8.34375 3.75,0 0,-4.375 -3.75,0 0,-7.3125 z m 117.96875,0 -5.5,3.1875 0,4.125 -2.53125,0 0,4.375 2.53125,0 0,9.03125 c -1e-5,1.94011 0.0703,3.23698 0.1875,3.875 0.14322,0.89844 0.3789,1.59766 0.75,2.125 0.37109,0.52735 0.95572,0.98047 1.75,1.3125 0.79426,0.33203 1.69791,0.5 2.6875,0.5 1.61457,0 3.06769,-0.29687 4.34375,-0.84375 l -0.46875,-4.25 c -0.96356,0.35156 -1.71095,0.53126 -2.21875,0.53125 -0.3646,10e-6 -0.6836,-0.09895 -0.9375,-0.28125 -0.25391,-0.18228 -0.39715,-0.40754 -0.46875,-0.6875 -0.0716,-0.27994 -0.12501,-1.27604 -0.125,-2.96875 l 0,-8.34375 3.75,0 0,-4.375 -3.75,0 0,-7.3125 z M 23.125,7.9375 c -2.747413,2e-5 -5.03387,1.15627 -6.84375,3.5 l 0,-3.03125 -5.09375,0 0,20.75 5.5,0 0,-9.40625 c 0,-2.3177 0.12629,-3.89062 0.40625,-4.75 0.27993,-0.85936 0.80728,-1.5729 1.5625,-2.09375 0.7552,-0.52081 1.61197,-0.78123 2.5625,-0.78125 0.74218,2e-5 1.37889,0.19793 1.90625,0.5625 0.52733,0.3646 0.89061,0.87372 1.125,1.53125 0.23436,0.65757 0.37498,2.10417 0.375,4.34375 l 0,10.59375 5.46875,0 0,-12.90625 c -2e-5,-1.60155 -0.1107,-2.82811 -0.3125,-3.6875 C 29.5794,11.70314 29.23305,10.92711 28.71875,10.25 28.20441,9.57294 27.44008,9.02997 26.4375,8.59375 25.43488,8.15758 24.33592,7.93752 23.125,7.9375 z m 33.8125,0 c -2.7474,2e-5 -5.01563,0.95965 -6.8125,2.90625 -1.79687,1.94663 -2.6875,4.65626 -2.6875,8.09375 0,2.87761 0.69531,5.26823 2.0625,7.15625 1.73177,2.35677 4.39322,3.53125 8,3.53125 2.27863,0 4.17055,-0.54558 5.6875,-1.59375 1.5169,-1.04818 2.64061,-2.55729 3.34375,-4.5625 l -5.46875,-0.9375 c -0.29949,1.04167 -0.75783,1.8125 -1.34375,2.28125 C 59.1328,25.28125 58.42186,25.5 57.5625,25.5 c -1.26303,0 -2.30991,-0.4388 -3.15625,-1.34375 -0.84636,-0.90494 -1.30465,-2.18489 -1.34375,-3.8125 l 13.75,0 C 66.89061,16.13803 66.03383,13.03777 64.25,11 62.46613,8.96226 60.02342,7.93752 56.9375,7.9375 z m 23.96875,0 c -0.88542,2e-5 -1.6784,0.21356 -2.375,0.65625 -0.69663,0.44273 -1.50261,1.35679 -2.375,2.75 l 0,-2.9375 -5.09375,0 0,20.75 5.5,0 0,-6.40625 c -1e-5,-3.52863 0.16275,-5.86197 0.46875,-6.96875 0.30598,-1.10676 0.71613,-1.85806 1.25,-2.28125 0.53384,-0.42317 1.20051,-0.65623 1.96875,-0.65625 0.79426,2e-5 1.638,0.30731 2.5625,0.90625 L 84.5,8.96875 C 83.34114,8.27867 82.15624,7.93752 80.90625,7.9375 z m 13.5,0 c -2.98178,2e-5 -5.17449,0.61982 -6.59375,1.84375 -1.41928,1.22398 -2.125,2.73439 -2.125,4.53125 0,1.9922 0.82812,3.53647 2.46875,4.65625 1.18489,0.8073 3.97915,1.71095 8.40625,2.6875 0.9505,0.22136 1.5703,0.45834 1.84375,0.71875 0.26041,0.27344 0.37498,0.61458 0.375,1.03125 -2e-5,0.61198 -0.23699,1.10417 -0.71875,1.46875 -0.71616,0.52084 -1.76824,0.78125 -3.1875,0.78125 -1.28907,0 -2.31511,-0.29036 -3.03125,-0.84375 C 91.1276,24.25912 90.67187,23.44271 90.4375,22.375 l -5.5,0.84375 c 0.50781,1.96615 1.57161,3.54167 3.21875,4.6875 1.64713,1.14584 3.89322,1.71875 6.71875,1.71875 3.11196,0 5.44269,-0.69531 7.03125,-2.0625 1.58852,-1.36718 2.40623,-3.00521 2.40625,-4.90625 -2e-5,-1.74479 -0.57294,-3.08593 -1.71875,-4.0625 -1.15887,-0.96353 -3.20183,-1.80467 -6.125,-2.46875 -2.92318,-0.66405 -4.63022,-1.16665 -5.125,-1.53125 -0.36459,-0.27342 -0.56251,-0.60936 -0.5625,-1 -1e-5,-0.45572 0.20832,-0.80728 0.625,-1.09375 0.62499,-0.40363 1.64843,-0.62498 3.09375,-0.625 1.14583,2e-5 2.03775,0.22658 2.65625,0.65625 0.61847,0.4297 1.02864,1.03647 1.25,1.84375 l 5.1875,-0.9375 C 103.07289,11.62762 102.13019,10.237 100.75,9.3125 99.36978,8.38805 97.24478,7.93752 94.40625,7.9375 z m 22.625,0 c -2.74741,2e-5 -5.01563,0.95965 -6.8125,2.90625 -1.79688,1.94663 -2.6875,4.65626 -2.6875,8.09375 0,2.87761 0.66406,5.26823 2.03125,7.15625 1.73176,2.35677 4.39322,3.53125 8,3.53125 2.27863,0 4.20181,-0.54558 5.71875,-1.59375 1.51691,-1.04818 2.60935,-2.55729 3.3125,-4.5625 l -5.46875,-0.9375 c -0.2995,1.04167 -0.72657,1.8125 -1.3125,2.28125 -0.58595,0.46875 -1.32813,0.6875 -2.1875,0.6875 -1.26303,0 -2.3099,-0.4388 -3.15625,-1.34375 -0.84636,-0.90494 -1.2735,-2.18489 -1.3125,-3.8125 l 13.75,0 c 0.0781,-4.20572 -0.77866,-7.30598 -2.5625,-9.34375 -1.78387,-2.03774 -4.22658,-3.06248 -7.3125,-3.0625 z m 23.21875,0 c -3.08595,2e-5 -5.53386,0.93622 -7.34375,2.84375 -1.8099,1.90757 -2.71875,4.57553 -2.71875,8 0,3.38542 0.88411,6.05469 2.6875,7.96875 1.80337,1.91406 4.21614,2.875 7.25,2.875 2.66926,0 4.8177,-0.64323 6.40625,-1.90625 1.58853,-1.26302 2.65883,-3.11978 3.21875,-5.59375 l -5.40625,-0.9375 c -0.27345,1.44532 -0.7422,2.47006 -1.40625,3.0625 -0.66407,0.59246 -1.4896,0.90625 -2.53125,0.90625 -1.39324,0 -2.51693,-0.51562 -3.34375,-1.53125 -0.82683,-1.01562 -1.25001,-2.75781 -1.25,-5.21875 -1e-5,-2.21353 0.40494,-3.80598 1.21875,-4.75 0.81379,-0.944 1.91405,-1.40623 3.28125,-1.40625 1.02863,2e-5 1.85546,0.26565 2.5,0.8125 0.64452,0.54689 1.06769,1.35679 1.25,2.4375 l 5.40625,-0.96875 C 148.81769,12.3047 147.74087,10.64976 146.25,9.5625 c -1.4909,-1.08721 -3.47397,-1.62498 -6,-1.625 z m 47.28125,0 c -2.03126,2e-5 -3.88412,0.44533 -5.53125,1.34375 -1.64714,0.89846 -2.91407,2.20054 -3.8125,3.90625 -0.89844,1.70574 -1.34375,3.45835 -1.34375,5.28125 0,2.38282 0.44531,4.40235 1.34375,6.0625 0.89843,1.66016 2.21223,2.92188 3.9375,3.78125 1.72525,0.85938 3.53645,1.3125 5.4375,1.3125 3.0729,0 5.6315,-1.02995 7.65625,-3.09375 2.02472,-2.0638 3.03123,-4.67448 3.03125,-7.8125 -2e-5,-3.11197 -1.02606,-5.68098 -3.03125,-7.71875 -2.00523,-2.03774 -4.5495,-3.06248 -7.6875,-3.0625 z m 26.9375,0 c -2.74741,2e-5 -5.03386,1.15627 -6.84375,3.5 l 0,-3.03125 -5.09375,0 0,20.75 5.46875,0 0,-9.40625 c -1e-5,-2.3177 0.15754,-3.89062 0.4375,-4.75 0.27994,-0.85936 0.77604,-1.5729 1.53125,-2.09375 0.7552,-0.52081 1.61197,-0.78123 2.5625,-0.78125 0.74217,2e-5 1.37889,0.19793 1.90625,0.5625 0.52732,0.3646 0.92186,0.87372 1.15625,1.53125 0.23436,0.65757 0.34373,2.10417 0.34375,4.34375 l 0,10.59375 5.5,0 0,-12.90625 c -2e-5,-1.60155 -0.1107,-2.82811 -0.3125,-3.6875 -0.20184,-0.85936 -0.54819,-1.63539 -1.0625,-2.3125 -0.51434,-0.67706 -1.27866,-1.22003 -2.28125,-1.65625 -1.00262,-0.43617 -2.10158,-0.65623 -3.3125,-0.65625 z m 20.09375,0 c -2.98178,2e-5 -5.17449,0.61982 -6.59375,1.84375 -1.41928,1.22398 -2.125,2.73439 -2.125,4.53125 0,1.9922 0.82812,3.53647 2.46875,4.65625 1.18489,0.8073 3.97915,1.71095 8.40625,2.6875 0.9505,0.22136 1.5703,0.45834 1.84375,0.71875 0.26041,0.27344 0.37498,0.61458 0.375,1.03125 -2e-5,0.61198 -0.23699,1.10417 -0.71875,1.46875 -0.71616,0.52084 -1.76824,0.78125 -3.1875,0.78125 -1.28907,0 -2.31511,-0.29036 -3.03125,-0.84375 -0.71615,-0.55338 -1.17188,-1.36979 -1.40625,-2.4375 l -5.53125,0.84375 c 0.50781,1.96615 1.60286,3.54167 3.25,4.6875 1.64713,1.14584 3.89322,1.71875 6.71875,1.71875 3.11196,0 5.44269,-0.69531 7.03125,-2.0625 1.58852,-1.36718 2.40623,-3.00521 2.40625,-4.90625 -2e-5,-1.74479 -0.57294,-3.08593 -1.71875,-4.0625 -1.15887,-0.96353 -3.20183,-1.80467 -6.125,-2.46875 -2.92318,-0.66405 -4.63022,-1.16665 -5.125,-1.53125 -0.36459,-0.27342 -0.56251,-0.60936 -0.5625,-1 -1e-5,-0.45572 0.20832,-0.80728 0.625,-1.09375 0.62499,-0.40363 1.64843,-0.62498 3.09375,-0.625 1.14583,2e-5 2.03775,0.22658 2.65625,0.65625 0.61847,0.4297 1.02864,1.03647 1.25,1.84375 l 5.1875,-0.9375 c -0.52086,-1.80988 -1.46356,-3.2005 -2.84375,-4.125 -1.38022,-0.92445 -3.50522,-1.37498 -6.34375,-1.375 z M 167,8.40625 l 0,20.75 5.5,0 0,-20.75 -5.5,0 z M 57.28125,12.125 c 1.11978,2e-5 2.06249,0.42319 2.84375,1.25 0.78124,0.82684 1.2109,2.03647 1.25,3.625 l -8.21875,0 c -0.01303,-1.49739 0.37499,-2.69009 1.15625,-3.5625 0.78124,-0.87238 1.77083,-1.31248 2.96875,-1.3125 z m 60.09375,0 c 1.11978,2e-5 2.06249,0.42319 2.84375,1.25 0.78123,0.82684 1.17965,2.03647 1.21875,3.625 l -8.1875,0 c -0.013,-1.49739 0.37499,-2.69009 1.15625,-3.5625 0.78124,-0.87238 1.77082,-1.31248 2.96875,-1.3125 z m 70.15625,0.28125 c 1.43228,2e-5 2.65494,0.56251 3.625,1.65625 0.97004,1.09376 1.43748,2.65626 1.4375,4.6875 -2e-5,2.08334 -0.46746,3.65626 -1.4375,4.75 -0.97006,1.09376 -2.19272,1.65625 -3.625,1.65625 -1.4323,0 -2.6172,-0.56249 -3.59375,-1.65625 -0.97657,-1.09374 -1.46875,-2.66145 -1.46875,-4.71875 0,-2.05728 0.49218,-3.62499 1.46875,-4.71875 0.97655,-1.09374 2.16145,-1.65623 3.59375,-1.65625 z",
	path2 = "m 0.5,0.5 0,28.625 5.78125,0 0,-11.9375 1.1875,0 c 1.32811,2e-5 2.29426,0.09767 2.90625,0.3125 0.61197,0.21486 1.20312,0.60808 1.75,1.1875 0.54686,0.57943 1.54686,1.9922 3.03125,4.21875 l 4.1875,6.21875 6.90625,0 -3.5,-5.59375 C 21.36976,21.3047 20.28253,19.77866 19.46875,18.90625 18.65493,18.03387 17.62498,17.22918 16.375,16.5 c 2.513,-0.36457 4.39321,-1.2565 5.65625,-2.65625 1.26299,-1.39973 1.90622,-3.16404 1.90625,-5.3125 C 23.93747,6.83857 23.52081,5.31513 22.6875,4 21.85414,2.68492 20.73045,1.7956 19.34375,1.28125 17.95701,0.76696 15.74738,0.50003 12.6875,0.5 L 0.5,0.5 z m 73.40625,0 0,28.625 5.46875,0 0,-28.625 -5.46875,0 z m -67.625,4.84375 4.53125,0 c 2.34374,0 3.74998,0.02865 4.21875,0.09375 0.93748,0.15628 1.6419,0.53258 2.15625,1.125 0.5143,0.59247 0.78123,1.38023 0.78125,2.34375 -2e-5,0.8594 -0.20314,1.5521 -0.59375,2.125 -0.39064,0.57294 -0.90367,0.98439 -1.59375,1.21875 -0.69012,0.23439 -2.44533,0.34377 -5.21875,0.34375 l -4.28125,0 0,-7.25 z m 31,2.5625 c -2.7474,2e-5 -5.04688,0.99091 -6.84375,2.9375 -1.79688,1.94664 -2.68751,4.62501 -2.6875,8.0625 -10e-6,2.87761 0.69531,5.26824 2.0625,7.15625 1.73176,2.35678 4.39322,3.53125 8,3.53125 2.27863,0 4.17056,-0.51432 5.6875,-1.5625 1.51691,-1.04817 2.6406,-2.58854 3.34375,-4.59375 L 41.375,22.53125 c -0.2995,1.04167 -0.75782,1.78126 -1.34375,2.25 C 39.4453,25.25001 38.73437,25.5 37.875,25.5 36.61197,25.5 35.5651,25.0612 34.71875,24.15625 33.87239,23.2513 33.4141,21.97136 33.375,20.34375 l 13.75,0 c 0.0781,-4.20572 -0.77866,-7.33722 -2.5625,-9.375 -1.78387,-2.03774 -4.19532,-3.06248 -7.28125,-3.0625 z m 22.4375,0 c -2.69532,2e-5 -4.72657,0.50523 -6.09375,1.46875 -1.36719,0.96357 -2.31511,2.43231 -2.875,4.4375 l 4.96875,0.90625 c 0.33853,-0.96353 0.79687,-1.64712 1.34375,-2.03125 0.54687,-0.38409 1.30467,-0.56248 2.28125,-0.5625 1.4453,2e-5 2.41665,0.20705 2.9375,0.65625 0.52082,0.44923 0.78123,1.22658 0.78125,2.28125 l 0,0.53125 c -0.9896,0.41668 -2.7474,0.86199 -5.3125,1.34375 -1.90104,0.3646 -3.36589,0.79298 -4.375,1.28125 -1.00912,0.48829 -1.78385,1.20704 -2.34375,2.125 -0.55989,0.91798 -0.84375,1.95313 -0.84375,3.125 0,1.77083 0.61328,3.2474 1.84375,4.40625 1.23047,1.15885 2.89583,1.71875 5.03125,1.71875 1.21093,0 2.36978,-0.23177 3.4375,-0.6875 1.0677,-0.45573 2.06249,-1.11979 3,-2.03125 0.0391,0.10417 0.0963,0.29948 0.1875,0.625 0.20831,0.71614 0.38801,1.26042 0.53125,1.625 l 5.4375,0 c -0.48179,-0.98958 -0.82424,-1.91537 -1,-2.78125 -0.17577,-0.86588 -0.25002,-2.20832 -0.25,-4.03125 l 0.0625,-6.40625 C 68.46873,13.52346 68.20701,11.89195 67.71875,11 67.23045,10.1081 66.3854,9.3607 65.1875,8.78125 63.98957,8.20185 62.16666,7.90627 59.71875,7.90625 z m -22.125,4.21875 c 1.11978,2e-5 2.09374,0.42319 2.875,1.25 0.78123,0.82683 1.17965,2.00522 1.21875,3.59375 l -8.21875,0 c -0.013,-1.49738 0.37499,-2.65883 1.15625,-3.53125 0.78124,-0.87237 1.77082,-1.31248 2.96875,-1.3125 z m 25.46875,7.03125 0,1.09375 c -2e-5,1.31511 -0.0755,2.21876 -0.21875,2.6875 -0.20835,0.71615 -0.64845,1.31771 -1.3125,1.8125 -0.89845,0.65105 -1.82293,0.96876 -2.8125,0.96875 -0.88543,10e-6 -1.61459,-0.2526 -2.1875,-0.8125 -0.57293,-0.55989 -0.875,-1.23176 -0.875,-2 0,-0.78124 0.3776,-1.42968 1.09375,-1.9375 0.46874,-0.31249 1.44531,-0.64322 2.96875,-0.96875 1.52343,-0.32552 2.64061,-0.60936 3.34375,-0.84375 z";
	

	var paper	= SVG('svg').size(1000, 1000),
		//p0	= paper.path("M0,0 l100,100").attr(attrs),
		p0		= paper.path(path1).attr({
			'stroke-width':	0.25,
			fill:			'lightgreen'
		}).scale(3).draggable().translate(100,100),
		p1		= paper.path(path2).scale(4).draggable().translate(300,150).attr({
			'stroke-width':	0.25,
			fill:			'lightblue'
		}),
		intersectionCircles = paper.group(),
		showIntersections = function() {
			//console.time("intersections");
			var intersections = p0.getIntersections(p1, function(intersections) {
				//console.timeEnd("intersections");
				intersectionCircles.clear();
				for(var i = 0; i<intersections.length; i++) {
					var intersection = intersections[i];
					if(typeof intersection === 'undefined')
						throw new Error("undefined  intersection?");
					intersectionCircles.circle(2).scale(3).center(intersection[0], intersection[1]).attr({
						stroke:			'#f00',
						'stroke-width':	0.5,
						fill:			'none'
					});
				}
			});
		};
	p1.dragmove = p0.dragmove = showIntersections;
	showIntersections();

	console.log(p0.getNearestPoint(130, 150));

		</script>
	</body>
</html>
